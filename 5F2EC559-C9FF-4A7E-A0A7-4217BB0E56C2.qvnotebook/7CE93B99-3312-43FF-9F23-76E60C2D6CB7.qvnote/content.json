{
  "title": "netstat",
  "cells": [
    {
      "type": "markdown",
      "data": "netstat -s \n통계 정보 조회\n```sh\n> netstat -s\ntcp:\n\t993606 packets sent\n\t\t99717 data packets (58622843 bytes)\n\t\t14704 data packets (13780118 bytes) retransmitted\n\t\t0 resend initiated by MTU discovery\n\t\t684104 ack-only packets (1114 delayed)\n\t\t0 URG only packet\n\t\t80 window probe packets\n\t\t127859 window update packets\n\t\t67213 control packets\n\t\t0 data packet sent after flow control\n\t\t837699 checksummed in software\n\t\t\t837508 segments (69389939 bytes) over IPv4\n\t\t\t191 segments (24970 bytes) over IPv6\n\t1921150 packets received\n\t\t140822 acks (for 51402718 bytes)\n\t\t18618 duplicate acks\n\t\t22 acks for unsent data\n....\n```\n\nnetstat \n전송 프로토콜 상태표시\n\n```sh\n> netstat\nActive Internet connections\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)    \ntcp4       0      0  172.30.35.53.60563     nrt12s14-in-f14..https ESTABLISHED\ntcp4       0      0  172.30.35.53.60562     nrt20s02-in-f5.1.https ESTABLISHED\ntcp4       0      0  172.30.35.53.60561     17.248.157.46.https    ESTABLISHED\ntcp4       0      0  172.30.35.53.60560     nrt12s12-in-f1.1.https ESTABLISHED\ntcp4       0      0  172.30.35.53.60559     edge-star-mini-s.https ESTABLISHED\ntcp4      31      0  172.30.35.53.60558     d.v.dropbox.com.https  CLOSE_WAIT \n....\n```\nnetstat -an\na : 모든 연결 수신 대기 포트 표시\nn : 주소나 포트 형식을 숫자로 표시\n\n```sh\nnetstat -an | more\nActive Internet connections (including servers)\nProto Recv-Q Send-Q  Local Address          Foreign Address        (state)    \ntcp4       0      0  172.30.35.53.60620     59.18.45.246.80        ESTABLISHED\ntcp4       0      0  172.30.35.53.60619     59.18.45.246.80        ESTABLISHED\ntcp4       0      0  172.30.35.53.60618     59.18.45.246.80        ESTABLISHED\ntcp4       0      0  172.30.35.53.60617     59.18.45.246.80        ESTABLISHED\ntcp4       0      0  172.30.35.53.60616     59.18.45.246.80        ESTABLISHED\ntcp4       0      0  172.30.35.53.60615     59.18.45.246.80        ESTABLISHED\n....\n```\n\nstate 값\nlisten : 요청을 받을수 있도록 연결 요구를 기다리는 상태\nestablished : 서로 연결되어 있는 상태 ( 3-way handshake 이후 상태 )\nSYN_SENT : SYN 패킷을 보낸후 연결을 요청하는 상태\nSYN_RECV : SYN 패킷으로 서비스 요청을 받은 후 이에 대한 응답으로 SYN/ACK 패킷을 보내고 상대로 부터 ACK 수신 대기 상태\nTIME_WAIT : \nCLOSE_WAIT : \nLAST_ACK \nCLOSED : 완전히 연결이 종료된 상태\n\nnetstat -anp\np : 해당 포트를 점유 하고 있는 프로세스 id 표시\n\nnetstat -anpo\no : timer 표시\nkeepalive (6176.47/0/0)  \n<1st field> <2nd field>\n\n1st field\nkeepalive - keepalive timer 가 시작 했을때\non - retransmission timer 가 시작 했을때 \nprobe - zero window probe timer 가 시작 했을때\noff - 아무 timer 도 동작 하고 있지 않을때 \n\n2nd field (6176.47/0/0) -> \n(시간/재전송횟수/keepalive probe가 성공적으로 전송된 횟수)\n"
    }
  ]
}